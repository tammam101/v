<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>WebAR — ArUco ثابت</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.4/aframe/build/aframe-ar.min.js"></script>
  <style>
    html,body{margin:0;height:100%;overflow:hidden;background:#000}
    .a-loader,.a-loader-title{display:none!important}
  </style>
</head>
<body>
  <a-scene embedded loading-screen="enabled:false" vr-mode-ui="enabled:false"
           renderer="alpha:true;antialias:true;logarithmicDepthBuffer:true"
           arjs="sourceType:webcam;facingMode:environment;detectionMode:mono;debugUIEnabled:false">
    <a-assets timeout="60000">
      <a-asset-item id="glb" src="3d-1.glb"></a-asset-item>
    </a-assets>

    <!-- ماركر ArUco/Barcode رقم 5 (عدّل الحجم الحقيقي إن تحب: بالمتر) -->
    <a-marker id="marker" type="barcode" value="5" size="0.16"
              emitevents="true" hide-on-lost="false"
              smooth="true" smoothCount="5" smoothTolerance="0.01" smoothThreshold="2">
      <!-- الموديل: على يمين الماركر وبحجم أكبر -->
      <a-entity id="model"
                gltf-model="#glb"
                position="0.65 0 0"
                rotation="0 0 0"
                scale="1.35 1.35 1.35"
                animation-mixer>
      </a-entity>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>

  <script>
    window.addEventListener('camera-init', ()=>console.log('✅ camera-init'));
    window.addEventListener('camera-error', (e)=>{
      alert('⚠️ تعذّر تشغيل الكاميرا.\nتأكد من الإذن وHTTPS وافتح الرابط في Safari/Chrome (مو متصفح داخل التطبيقات).');
      console.error(e);
    });
  </script>
</body>
</html>
